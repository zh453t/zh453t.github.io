/* 定义层级 */
@layer base, components, utilities;

/* 基础样式 */
@layer base {
	:root {
		/* 主题色 (蓝色系) */
		--primary: oklch(22% 0.07 253);
		--primary-background: oklch(95.5% 0.06 253);
		--text-primary: oklch(20% 0.04 253);
		--text-light: oklch(45% 0.04 253);

		/* 辅色 (橙色系) */
		--secondary: oklch(50% 0.13 55);
		--secondary-background: oklch(94% 0.05 55 / 0.34);

		/* 高光色 (黄色系) */
		--highlight: oklch(70% 0.14 90);

		/* 背景与边框 (中性色) */
		--background: oklch(96.78% 0.00867 248.208);
		--border: oklch(41.3% 0.03613 257.81);
	}

	body {
		font-family: system-ui, sans-serif;
		min-height: 100vh;
		background: var(--background);
		color: var(--text-primary);
		padding: 1em 20vw;
	}

	/* 基础链接样式 */
	a {
		color: inherit;
		text-decoration: none;
	}

	a:visited {
		color: inherit;
	}
}

/* 组件样式 */
@layer components {
	a.donate {
		display: block;
		padding: 0.8em 1.5em;
		margin-block: 1em;
		width: fit-content;
		border: 1px solid var(--border);
		box-shadow: 0 2px 8px hsl(0 0% 0% / 0.1);
		border-radius: 8px;
		transition: all 0.2s ease;
	}

	main {
		min-inline-size: min(100% - 2rem, 720px);
		margin-block: 5vh;
	}

	.search-box {
		border: 1px solid var(--border);
		box-shadow: 0 2px 8px hsl(0 0% 0% / 0.1);
		inline-size: 100%;
		padding: 0.9rem;
		border-radius: 8px;
		transition: all 0.2s ease;
		font-size: 1.1em;
	}

	.search-box:focus-visible {
		border-color: transparent;
		outline: 2px solid var(--primary);
		outline-offset: 2px;
	}

	output {
		display: grid;
		gap: 1em;
		margin-block-start: 1.5rem;
	}

	.result-item {
		display: grid;
		padding: 1rem;
		border: 1px solid var(--border);
		border-radius: 8px;
		transition: transform 0.2s ease;
	}

	.result-item:hover {
		transform: scale(1.02);
		cursor: pointer;
	}

	.result-item .source {
		justify-self: end;
		padding: 0.3em 0.6em;
		border-radius: 4px;
		font-size: 0.9em;
		font-weight: 500;
		background: hsl(0 0% 95%);
	}

	.result-item .source[data-source='am'] {
		color: var(--primary);
		background: var(--primary-background);
	}

	.result-item .source[data-source='qobuz'] {
		color: var(--secondary);
		background: var(--secondary-background);
	}

	.result-item .highlight {
		color: var(--highlight);
		font-weight: 600;
		background-color: oklch(95% 0.05 100 / 0.7);
		border-radius: 3px;
		padding-inline: 0.15em;
		box-shadow: 0 0 5px oklch(95% 0.05 100 / 0.5);
	}
	.result-item .artist {
		font-size: 0.9em;
		color: var(--text-light);
	}

	.result-item .album {
		font-weight: 600;
		margin-block: 0.3em;
	}

	.result-item .meta {
		color: var(--text-light);
		font-size: 0.9em;
	}

	.result-item .meta span:not(:last-child)::after {
		content: '•';
		margin-inline: 0.5em;
	}

	.result-item .track-match-list {
		list-style-type: none;
		padding-inline-start: 0;
		margin: 0.75em 0 0 0;
		border-top: 1px solid var(--border);
		padding-block-start: 0.75em;
	}

	.result-item .track-match-item {
		font-size: 0.9em;
		color: var(--text-light);
		line-height: 1.5;
		padding-inline-start: 1.5em;
		position: relative;
	}

	.result-item .track-match-item::before {
		content: '↳';
		position: absolute;
		inset-inline-start: 0.25em;
		inset-block-start: 0;
		color: var(--secondary);
		font-weight: 600;
	}

	/* 浮动按钮 */
	.fixed-button {
		display: block;
		position: fixed;
		inset-block-end: 2em;
		inset-inline-start: 2em;
		inline-size: 6em;
		block-size: 3em;
		line-height: 3em;
		background-color: var(--secondary-background);
		color: var(--secondary);
		font-weight: bold;
		text-align: center;
		font-size: large;
		border: 2px solid var(--secondary);
		border-radius: 0.5em;
	}

	.fixed-button.donate:visited {
		color: var(--secondary);
	}
}

/* 工具样式 */
@layer utilities {
	@media (max-width: 600px) {
		.mobile-hidden {
			display: none;
		}
	}
}
