<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>base64</title>
	<style>
		body {color: #333;background-color: #fcfcfc}
		fieldset {
			display: flex;
			flex-direction: column;
			align-items: center;
			margin: 1em auto;
			max-width: 80vw;
			width: fit-content;
		}
		output {
			display: block;
			padding: 0.1em 0.5em;
			border: 1px solid #444;
			max-width: 70vw;
			font-family: Consolas, Microsoft Jhenghei, monospace;
			word-wrap: break-word;
			white-space: pre-wrap;
		}
		button {
			padding: 2px 5px;
			border-color: #eee;
		}
		fieldset :where(p, legend) {user-select: none}
		legend {
			padding-inline: 0.5rem;
		}
		input, textarea {
			font-family: Consolas, Microsoft Jhenghei, monospace;
			color: #555;
			height: fit-content;
		}
		textarea {
			width: 28em;
			height: 5em;
		}
		#encBtn {margin-block: 1.2em}
		fieldset[title="编码"] p {margin-block-start: 0.4em;}
	</style>
</head>
<body>
<h3>base64加密 (uri方法)</h3>
<fieldset title="编码">
<legend>编码</legend>
<p>输入字符串：</p> <textarea type="text" id="encStr"></textarea> <button id="encBtn">加密</button>	
<output id="enc-out">输出base64</output>
<script>
	'use strict'
	document.getElementById('encBtn').addEventListener('click', function() {
		document.getElementById('enc-out').textContent = window.btoa(encodeURIComponent(document.getElementById('encStr').value))
	})
</script>
</fieldset>
<fieldset title="解码">
<legend>解码</legend>
<p>输入字符串： <input type="Password" id="decStr"> <button id="decBtn">解密</button></p>
<output id="dec-out">还原string</output>
<script>
	'use strict'
	document.getElementById('decBtn').addEventListener('click', function() {
		document.getElementById('dec-out').textContent = decodeURIComponent(window.atob(document.getElementById('decStr').value))
	})
</script>
</fieldset>
<!--JUU5JUEyJTg2JUU1JUFGJUJDJUU2JTlEJUE1JUU0JUJBJTg2-->
<address><a href="https://cms.35g.tw/coding/javascript-btoa-string-contains-an-invalid-character">感谢：</a><br>应先过一遍uri</address>
</body>
</html>